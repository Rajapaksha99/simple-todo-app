- name: ðŸš€ Deploy to Server
  run: |
    ssh -o StrictHostKeyChecking=no hostapp@13.91.104.221 << 'EOF'
      set -e  # exit if any command fails

      cd ~/simple-todo-app

      echo "ðŸ”„ Cleaning local changes"
      git reset --hard
      git clean -fd

      echo "â¬‡ï¸ Pulling latest code from origin/main"
      git pull origin main

      echo "ðŸ“¦ Installing backend dependencies"
      cd backend
      npm install
      pm2 restart backend || pm2 start Server.js --name backend

      echo "ðŸ§± Building frontend"
      cd ../frontend
      npm install
      npm run build

      echo "ðŸŒ Updating frontend in Nginx"
      sudo rm -rf /var/www/html/*
      sudo cp -r build/* /var/www/html/

      echo "âœ… Deployment complete!"
    EOF
