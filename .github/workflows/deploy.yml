- name: 🚀 Deploy to Server
  run: |
    ssh -o StrictHostKeyChecking=no hostapp@13.91.104.221 << 'EOF'
      cd ~/simple-todo-app

      echo "🔄 Cleaning local repo before pull"
      git reset --hard
      git clean -fd

      echo "⬇️ Pulling latest code from origin/main"
      git pull origin main

      # rest of deploy steps ...
      cd backend
      npm install
      pm2 restart backend || pm2 start Server.js --name backend

      cd ../frontend
      npm install
      npm run build

      sudo rm -rf /var/www/html/*
      sudo cp -r build/* /var/www/html/

      echo "✅ Deployment complete!"
    EOF
